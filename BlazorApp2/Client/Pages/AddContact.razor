@page "/addContact"
@using BlazorDirectoryProject;
@inject HttpClient Http
@inject NavigationManager Navigation
<h3>Add Contact</h3>
<EditForm Model="@_contact" OnValidSubmit="Post">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="form-group">
        <label>Name Contact</label>
        <InputText @ref="name" @bind-Value="_contact.nameContact" />
    </div>
    <div class="form-group">
        <label>Phone Contact</label>
        <InputText @ref="landline" @bind-Value="_contact.landlineContact" />
    </div>
    <div class="form-group">
        <label>Cellphone Contact</label>
        <InputText @ref="cellphone" @bind-Value="_contact.cellphoneContact" />
    </div>
    <div class="form-group">
        <input type="submit" class="btn btn-success" value="Add Contact" />
    </div>
</EditForm>
@code {
    InputText name;
    InputText landline;
    InputText cellphone;

    private Contact _contact = new();

    public static int sizeActually = 0;
    private async Task Post()
    {
        if (Index.sizeContact > 0 && sizeActually < Index.sizeContact)
        {
            HttpResponseMessage response = await Http.PostAsJsonAsync<Contact>("/api/Contact", _contact);

           
                if (response.IsSuccessStatusCode)
                {
                    sizeActually++;
                    Navigation.NavigateTo($"/listContacts");
                }

          


        }
    }
}